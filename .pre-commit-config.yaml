repos:
  - repo: local
    hooks:
      - id: rustfmt
        name: rustfmt
        language: system
        entry: rustfmt
        args: ["--edition", "2024", "--check"]
        pass_filenames: true
        files: \.rs$

      - id: cargo clippy
        name: cargo clippy
        language: system
        entry: cargo
        args:
          [
            "clippy",
            "--all",
            "--tests",
            "--all-features",
            "--no-deps",
            "--",
            "-D",
            "warnings",
          ]
        pass_filenames: false

      - id: cargo-deny
        name: cargo-deny
        language: system
        entry: cargo-deny
        args: ["check"]
        pass_filenames: false

      # link validation
      - id: lychee
        name: lychee
        language: system
        entry: lychee
        args: ["--no-progress", "--cache"]

      - id: cargo-spellcheck
        name: cargo-spellcheck
        language: system
        entry: bash
        args:
          - -c
          - |
            if ! cargo-spellcheck check --code 1
            then
                echo ''
                echo ''
                echo 'If this is a Rust method/type/variable name, then you should'
                echo 'enclose it in backticks like this: `MyRustType`.'
                echo ''
                echo 'If this is a real word, then you can add it to spellcheck.dic'
                exit 1
            fi
        pass_filenames: false

  - repo: https://github.com/igorshubovych/markdownlint-cli
    rev: v0.43.0
    hooks:
      - id: markdownlint

  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v5.0.0
    hooks:
      - id: check-yaml
      - id: check-toml
      - id: forbid-submodules
